import pytest
import requests

def test_app():
    captcha = "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"
    BASE_URL = "http://127.0.0.1:5000"
    r = requests.post(BASE_URL + '/createTask', json={
        'task': {
            'body': captcha
        }
    }, headers={'Content-Type': 'application/json'})

    assert r.json()['errorId'] == 0

    r = requests.post(BASE_URL + '/getTaskResult', json={
        'taskId': r.json()['taskId']
    }, headers={'Content-Type': 'application/json'})

    assert r.json()['solution']['text'] == 'YNCJKY'